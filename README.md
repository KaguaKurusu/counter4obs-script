# Counter for OBS Studio (Script version)
**任意のテキストソースの数値部分をショートカットキーまたはボタンクリックにてカウントアップ/ダウンを行うOpen Broadcast Software Studio用のスクリプト**  
[![MIT License](https://img.shields.io/badge/license-MIT-blue)](LICENSE)

## 概要
任意のテキストソースの数値部分をショートカットキーまたはボタンクリックにてカウントアップ/ダウンを行うOBSスクリプトです。

## ダウンロード
[リリースページ](https://github.com/KaguaKurusu/counter4obs-script/releases/)よりダウンロード。

## インストール
ダウンロードしたファイルを任意の場所に解凍。  
(OBSインストール先\data\obs-plugins\frontend-tools\scripts内にcounter.luaを配置が推奨)  
OBSを起動し、下記手順でOBSに追加。  
1.メニューバーのツール > スクリプトをクリック。  
2.表示されたダイアログ左下の＋ボタンをクリック。  
3.表示されたファイル選択ダイアログでcounter.luaを選択し、開くをクリック。  

# ショートカットの設定方法
OBSのメニューバー > ファイル > 設定などより設定ダイアログを表示。  
ホットキーのを選択。  
カウントアップ、カウントダウンのいずれかの右横にあるテキストボックスを選択。  
設定したいショートカットキーを押下。  
右下のOKボタンをクリック。

## 使用方法
任意のシーンにテキストを空にしたテキストソースを追加。（テキスト以外は任意に設定可能）  
メニューバーのツール > スクリプトでスクリプトダイアログを表示し、counter.luaを選択。  
テキストソースの選択、数値前の文字（オプション）、数値後の文字（オプション）、増減数、開始値を設定。  
セットボタンをクリック。  
カウントアップまたはカウントダウンしたい際に、設定したショートカットキーを押下するか、スクリプトダイアログのカウントアップまたはカウントダウンボタンをクリック。

## Tips
桁数が増えると全体の文字幅が変わるために、一部が画面外に行ってしまうという事象をみたことがありますが、下記のように設定すると防げます。  
対象のテキストソースを選択し、Ctrl⁺Eを押下。  
表示されたダイアログの位置揃えを下記桁数が増えた場合の挙動を参考に変更。

### 桁数が増えた場合の挙動
左上、左中央、左下のいずれかを選択した場合、テキストソースの左の位置が固定されたままで全体の領域が右に伸びる。  
中央上、中央、中央下のいずれかを選択した場合、テキストソースの中央の位置が固定されたままで全体の領域は左右均等に伸びる。  
右上、右中央、右下のいずれかを選択した場合、テキストソースの右の位置がこていされたままで全体の領域は左に伸びる。  

## 動作環境
OBS Studio 21.0以降  
なお、Windows10 OBS 27.0.1(64bit)でのみテスト済みです。

## 既知の問題点など
数値が2個以上でそれぞれカウントしたい場合（例：〇勝△敗など）に対応できない。  
→ソースコードの一部やファイル名を変更して対応できなくはないですが、本質的な解決ではない。）  
  
接尾語および接頭語を変更してもすぐに反映されない。  
→カウント開始前の場合、セットをクリック、開始後の場合は次回カウント時より反映されます。  
  
設定時に毎回スクリプトダイアログ表示しなくてはいけなくて面倒くさい。  
→プラグイン形式でドック使って作れないか思案中ですが、できるか不明です。  
  
ソースを非表示にしているとカウントアップ/ダウンされない。  
→仕様です。

## ライセンス
本スクリプトは[MIT](LICENSE)にて公開しております。  
&copy; 2021, [来栖華紅鴉](https://twitter.com/kagua_kurusu)